"use strict";function peg$subclass(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}function peg$SyntaxError(r,t,n,e){this.message=r,this.expected=t,this.found=n,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}function peg$parse(r,t){t=void 0!==t?t:{};var n,e={},u={GIFTQuestions:Fn},c=Fn,o=function(r){return r},a=mn("Category"),i="$",l=An("$",!1),s="CATEGORY:",f=An("CATEGORY:",!1),h=function(r){return{type:"Category",title:r}},p=mn("Description"),d=function(r,t){var n={id:ne,tags:ee,type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1};return se(),ne=null,ee=null,n},g="{",A=An("{",!1),v="}",m=An("}",!1),b=function(r,t,n,e){var u=null!==e,c=t?t.text+(u?" ":""):"",o=t&&t.format||e&&e.format||"moodle",a=c+(u?"_____ "+e.text:""),i={type:n.type,title:r,stem:{format:o,text:a},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.trueFeedback=t.feedback[1],r.falseFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,n=0;n<r.length;n++)t&=r[n].isCorrect;return t}(r.choices)&&(r.type="Short");return r.id=ne,r.tags=ee,r}(i,n),se(),i},C=mn("{= match1 -> Match1\n...}"),x=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},y=mn("matches"),F=function(r){return r},w=mn("match"),k="=",E=An("=",!1),S="->",T=An("->",!1),$=function(r,t){return{subquestion:{format:null!==r?r.format:le(),text:null!==r?r.text:""},subanswer:t}},j=mn("{T} or {F} or {TRUE} or {FALSE}"),M=function(r,t,n){return{type:"TF",isTrue:r,feedback:t,globalFeedback:n}},R=function(r){return r},N="TRUE",_=An("TRUE",!1),L="T",U=An("T",!1),q=function(){return!0},G="FALSE",O=An("FALSE",!1),P="F",D=An("F",!1),Q=function(){return!1},Y=mn("{=correct choice ~incorrect choice ... }"),H=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},I=mn("Choices"),z=function(r){return r},B=mn("Choice"),J=/^[=~]/,K=vn(["=","~"],!1,!1),V=function(r,t){var n=r[2],e=r[4];return r={isCorrect:"="==r[0],weight:n,text:e,feedback:t}},W=mn("(weight)"),X="%",Z=An("%",!1),rr=/^[\-]/,tr=vn(["-"],!1,!1),nr=function(r){return parseFloat(r.join(""))},er=mn("(percent)"),ur="100",cr=An("100",!1),or=/^[0-9]/,ar=vn([["0","9"]],!1,!1),ir=/^[.]/,lr=vn(["."],!1,!1),sr=function(){return gn()},fr=mn("(feedback)"),hr="#",pr=An("#",!1),dr="###",gr=An("###",!1),Ar=function(r){return r},vr=mn("Essay question { ... }"),mr="",br=function(r){return{type:"Essay",globalFeedback:r}},Cr=mn("Single short answer { ... }"),xr=function(r,t,n){var e=[];return e.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:e,globalFeedback:n}},yr=mn("{#... }"),Fr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},wr=mn("Numerical Answers"),kr=mn("Multiple Numerical Choices"),Er=mn("Numerical Choice"),Sr=function(r,t){var n=r[0],e=r[1],u=r[2];return r={isCorrect:"="==n,weight:e,text:null!==u?u:{format:le(),text:"*"},feedback:t}},Tr=mn("Single numeric answer"),$r=mn("(number with range)"),jr=":",Mr=An(":",!1),Rr=function(r,t){return{type:"range",number:r,range:t}},Nr=mn("(number with high-low)"),_r="..",Lr=An("..",!1),Ur=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},qr=mn("(number answer)"),Gr=function(r){return{type:"simple",number:r}},Or=mn(":: Title ::"),Pr="::",Dr=An("::",!1),Qr=function(r){return ae(r.join(""))},Yr=mn("Question stem"),Hr=function(r){var t;return t=r.format,ce=t,r},Ir=mn("(blank lines separator)"),zr=mn("(blank lines)"),Br=mn("blank line"),Jr=mn("(Title text)"),Kr=function(r){return r},Vr=mn("(text character)"),Wr=mn("format"),Xr="[",Zr=An("[",!1),rt="html",tt=An("html",!1),nt="markdown",et=An("markdown",!1),ut="plain",ct=An("plain",!1),ot="moodle",at=An("moodle",!1),it="]",lt=An("]",!1),st=function(r){return r},ft=mn("(escape character)"),ht="\\",pt=An("\\",!1),dt=mn("escape sequence"),gt="~",At=An("~",!1),vt="n",mt=An("n",!1),bt=function(r){return oe["\\"+r]},Ct=mn(""),xt={type:"any"},yt=function(){return gn()},Ft=mn("(formatted text excluding '->')"),wt=function(r,t){return{format:null!==r?r:le(),text:"html"!==r&&"markdown"!==r?ae(ie(t.join("").trim())):ae(t.join("")).replace(/\r\n/g,"\n").trim()}},kt=mn("(formatted text)"),Et=function(r,t){return{format:null!==r?r:le(),text:"html"!==r&&"markdown"!==r?ae(ie(t.join("").trim())):ae(t.join("")).replace(/\r\n/g,"\n").trim()}},St=mn("(unformatted text)"),Tt=function(r){return ie(r.join("").trim())},$t=mn("(category text)"),jt=function(r){return r.flat().join("")},Mt=function(){return parseFloat(gn())},Rt=".",Nt=An(".",!1),_t=/^[+\-]/,Lt=vn(["+","-"],!1,!1),Ut="####",qt=An("####",!1),Gt=function(r){return r},Ot=mn("(single line whitespace)"),Pt=mn("(multiple line whitespace)"),Dt=" ",Qt=An(" ",!1),Yt=function(){ne=null,ee=null},Ht=mn("(comment)"),It="//",zt=An("//",!1),Bt=/^[^\n\r]/,Jt=vn(["\n","\r"],!0,!1),Kt=function(r){return null},Vt=function(r){var t=r.join(""),n=t.match(/\[id:([^\x00-\x1F\x7F]+?)]/);n&&(ne=n[1].trim().replace("\\]","]"));t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g);return Array.from(t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),(function(r){return r[1]})).forEach((function(r){ee||(ee=[]),ee.push(r)})),null},Wt=mn("(space)"),Xt="\t",Zt=An("\t",!1),rn=mn("(end of line)"),tn="\r\n",nn=An("\r\n",!1),en="\n",un=An("\n",!1),cn="\r",on=An("\r",!1),an=function(){return"EOF"},ln=0,sn=0,fn=[{line:1,column:1}],hn=0,pn=[],dn=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=u[t.startRule]}function gn(){return r.substring(sn,ln)}function An(r,t){return{type:"literal",text:r,ignoreCase:t}}function vn(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function mn(r){return{type:"other",description:r}}function bn(t){var n,e=fn[t];if(e)return e;for(n=t-1;!fn[n];)n--;for(e={line:(e=fn[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return fn[t]=e,e}function Cn(r,t){var n=bn(r),e=bn(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function xn(r){ln<hn||(ln>hn&&(hn=ln,pn=[]),pn.push(r))}function yn(r,t,n){return new peg$SyntaxError(peg$SyntaxError.buildMessage(r,t),r,t,n)}function Fn(){var r,t,n;if(r=ln,t=[],(n=wn())===e&&(n=kn())===e&&(n=En()),n!==e)for(;n!==e;)t.push(n),(n=wn())===e&&(n=kn())===e&&(n=En());else t=e;return t!==e&&(n=Kn())!==e&&Vn()!==e?(sn=r,r=t=o(t)):(ln=r,r=e),r}function wn(){var t,n,u,c;return dn++,t=ln,Wn()!==e&&Vn()!==e?(36===r.charCodeAt(ln)?(n=i,ln++):(n=e,0===dn&&xn(l)),n!==e?(r.substr(ln,9)===s?(u=s,ln+=9):(u=e,0===dn&&xn(f)),u!==e&&Kn()!==e?(c=function(){var t,n,u,c,o;dn++,t=ln,n=[],u=ln,c=ln,dn++,o=re(),dn--,o===e?c=void 0:(ln=c,c=e);c!==e?(r.length>ln?(o=r.charAt(ln),ln++):(o=e,0===dn&&xn(xt)),o!==e?u=c=[c,o]:(ln=u,u=e)):(ln=u,u=e);for(;u!==e;)n.push(u),u=ln,c=ln,dn++,o=re(),dn--,o===e?c=void 0:(ln=c,c=e),c!==e?(r.length>ln?(o=r.charAt(ln),ln++):(o=e,0===dn&&xn(xt)),o!==e?u=c=[c,o]:(ln=u,u=e)):(ln=u,u=e);n!==e?(u=ln,dn++,(c=re())===e&&(c=te()),dn--,c!==e?(ln=u,u=void 0):u=e,u!==e?(sn=t,t=n=jt(n)):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn($t));return t}(),c!==e&&Ln()!==e?(sn=t,t=h(c)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(e,0===dn&&xn(a)),t}function kn(){var r,t,n,u;if(dn++,r=ln,Wn()!==e)if(Vn()!==e){for(t=[],n=Xn();n!==e;)t.push(n),n=Xn();t!==e?((n=Nn())===e&&(n=null),n!==e&&Kn()!==e&&(u=_n())!==e&&Ln()!==e?(sn=r,r=d(n,u)):(ln=r,r=e)):(ln=r,r=e)}else ln=r,r=e;else ln=r,r=e;return dn--,r===e&&(e,0===dn&&xn(p)),r}function En(){var t,n,u,c,o,a,i,l;if(t=ln,Wn()!==e)if(Vn()!==e){for(n=[],u=Xn();u!==e;)n.push(u),u=Xn();n!==e?((u=Nn())===e&&(u=null),u!==e&&Kn()!==e?((c=_n())===e&&(c=null),c!==e&&Kn()!==e?(123===r.charCodeAt(ln)?(o=g,ln++):(o=e,0===dn&&xn(A)),o!==e&&Kn()!==e?(a=function(){var r,t,n;dn++,r=ln,t=function(){var r,t,n;if(dn++,r=ln,t=[],n=Sn(),n!==e)for(;n!==e;)t.push(n),n=Sn();else t=e;t!==e&&(sn=r,t=F(t));r=t,dn--,r===e&&(t=e,0===dn&&xn(y));return r}(),t!==e&&Kn()!==e?((n=Jn())===e&&(n=null),n!==e&&Kn()!==e?(sn=r,r=t=x(t,n)):(ln=r,r=e)):(ln=r,r=e);dn--,r===e&&(t=e,0===dn&&xn(C));return r}(),a===e&&(a=function(){var t,n,u,c,o,a;dn++,t=ln,n=function(){var t,n;t=ln,n=function(){var t,n;t=ln,r.substr(ln,4)===N?(n=N,ln+=4):(n=e,0===dn&&xn(_));n===e&&(84===r.charCodeAt(ln)?(n=L,ln++):(n=e,0===dn&&xn(U)));n!==e&&(sn=t,n=q());return t=n,t}(),n===e&&(n=function(){var t,n;t=ln,r.substr(ln,5)===G?(n=G,ln+=5):(n=e,0===dn&&xn(O));n===e&&(70===r.charCodeAt(ln)?(n=P,ln++):(n=e,0===dn&&xn(D)));n!==e&&(sn=t,n=Q());return t=n,t}());n!==e&&(sn=t,n=R(n));return t=n,t}(),n!==e&&Kn()!==e?(u=ln,(c=Kn())!==e?((o=jn())===e&&(o=null),o!==e?((a=jn())===e&&(a=null),a!==e?u=c=[c,o,a]:(ln=u,u=e)):(ln=u,u=e)):(ln=u,u=e),u!==e&&(c=Kn())!==e?((o=Jn())===e&&(o=null),o!==e?(sn=t,t=n=M(n,u,o)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn(j));return t}(),a===e&&(a=function(){var r,t,n;dn++,r=ln,t=function(){var r,t,n;if(dn++,r=ln,t=[],n=Tn(),n!==e)for(;n!==e;)t.push(n),n=Tn();else t=e;t!==e&&(sn=r,t=z(t));r=t,dn--,r===e&&(t=e,0===dn&&xn(I));return r}(),t!==e&&Kn()!==e?((n=Jn())===e&&(n=null),n!==e&&Kn()!==e?(sn=r,r=t=H(t,n)):(ln=r,r=e)):(ln=r,r=e);dn--,r===e&&(t=e,0===dn&&xn(Y));return r}(),a===e&&(a=function(){var t,n,u,c;dn++,t=ln,35===r.charCodeAt(ln)?(n=hr,ln++):(n=e,0===dn&&xn(pr));n!==e&&Kn()!==e?(u=function(){var r;dn++,r=function(){var r,t,n;if(dn++,r=ln,t=[],n=Mn(),n!==e)for(;n!==e;)t.push(n),n=Mn();else t=e;t!==e&&(sn=r,t=z(t));r=t,dn--,r===e&&(t=e,0===dn&&xn(kr));return r}(),r===e&&(r=Rn());dn--,r===e&&(e,0===dn&&xn(wr));return r}(),u!==e&&Kn()!==e?((c=Jn())===e&&(c=null),c!==e?(sn=t,t=n=Fr(u,c)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn(yr));return t}(),a===e&&(a=function(){var r,t,n,u;dn++,r=ln,t=In(),t!==e&&Kn()!==e?((n=jn())===e&&(n=null),n!==e&&Kn()!==e?((u=Jn())===e&&(u=null),u!==e&&Kn()!==e?(sn=r,r=t=xr(t,n,u)):(ln=r,r=e)):(ln=r,r=e)):(ln=r,r=e);dn--,r===e&&(t=e,0===dn&&xn(Cr));return r}(),a===e&&(a=function(){var r,t,n;dn++,r=ln,t=mr,t!==e&&Kn()!==e?((n=Jn())===e&&(n=null),n!==e&&Kn()!==e?(sn=r,r=t=br(n)):(ln=r,r=e)):(ln=r,r=e);dn--,r===e&&(t=e,0===dn&&xn(vr));return r}()))))),a!==e&&Kn()!==e?(125===r.charCodeAt(ln)?(i=v,ln++):(i=e,0===dn&&xn(m)),i!==e&&Kn()!==e?(l=function(){var t,n,u,c;dn++,t=ln,r.substr(ln,2)===It?(n=It,ln+=2):(n=e,0===dn&&xn(zt));if(n!==e){for(u=[],Bt.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(Jt));c!==e;)u.push(c),Bt.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(Jt));u!==e?(sn=t,t=n=Kt(u)):(ln=t,t=e)}else ln=t,t=e;dn--,t===e&&(n=e,0===dn&&xn(Ht));return t}(),l===e&&(l=_n()),l===e&&(l=null),l!==e&&Ln()!==e?(sn=t,t=b(u,c,a,l)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)}else ln=t,t=e;else ln=t,t=e;return t}function Sn(){var t,n,u,c,o;return dn++,t=ln,Kn()!==e?(61===r.charCodeAt(ln)?(n=k,ln++):(n=e,0===dn&&xn(E)),n!==e&&Kn()!==e?(u=function(){var r,t,n,u;dn++,r=ln,t=Pn(),t===e&&(t=null);if(t!==e)if(Kn()!==e){if(n=[],(u=On())!==e)for(;u!==e;)n.push(u),u=On();else n=e;n!==e?(sn=r,r=t=wt(t,n)):(ln=r,r=e)}else ln=r,r=e;else ln=r,r=e;dn--,r===e&&(t=e,0===dn&&xn(Ft));return r}(),u===e&&(u=null),u!==e&&Kn()!==e?(r.substr(ln,2)===S?(c=S,ln+=2):(c=e,0===dn&&xn(T)),c!==e&&Kn()!==e?(o=function(){var r,t,n;if(dn++,r=ln,t=[],n=Gn(),n!==e)for(;n!==e;)t.push(n),n=Gn();else t=e;t!==e&&(sn=r,t=Tt(t));r=t,dn--,r===e&&(t=e,0===dn&&xn(St));return r}(),o!==e&&Kn()!==e?(sn=t,t=$(u,o)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(e,0===dn&&xn(w)),t}function Tn(){var t,n,u,c,o,a,i;return dn++,t=ln,Kn()!==e?(n=ln,J.test(r.charAt(ln))?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(K)),u!==e&&(c=Kn())!==e?((o=$n())===e&&(o=null),o!==e&&(a=Kn())!==e&&(i=In())!==e?n=u=[u,c,o,a,i]:(ln=n,n=e)):(ln=n,n=e),n!==e?((u=jn())===e&&(u=null),u!==e&&(c=Kn())!==e?(sn=t,t=V(n,u)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(e,0===dn&&xn(B)),t}function $n(){var t,n,u,c,o;return dn++,t=ln,37===r.charCodeAt(ln)?(n=X,ln++):(n=e,0===dn&&xn(Z)),n!==e?(u=ln,rr.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(tr)),c===e&&(c=null),c!==e?(o=function(){var t,n,u,c,o,a;dn++,r.substr(ln,3)===ur?(t=ur,ln+=3):(t=e,0===dn&&xn(cr));if(t===e)if(t=ln,or.test(r.charAt(ln))?(n=r.charAt(ln),ln++):(n=e,0===dn&&xn(ar)),n!==e)if(or.test(r.charAt(ln))?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(ar)),u===e&&(u=null),u!==e)if(ir.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(lr)),c===e&&(c=null),c!==e){for(o=[],or.test(r.charAt(ln))?(a=r.charAt(ln),ln++):(a=e,0===dn&&xn(ar));a!==e;)o.push(a),or.test(r.charAt(ln))?(a=r.charAt(ln),ln++):(a=e,0===dn&&xn(ar));o!==e?(sn=t,t=n=sr()):(ln=t,t=e)}else ln=t,t=e;else ln=t,t=e;else ln=t,t=e;dn--,t===e&&(n=e,0===dn&&xn(er));return t}(),o!==e?u=c=[c,o]:(ln=u,u=e)):(ln=u,u=e),u!==e?(37===r.charCodeAt(ln)?(c=X,ln++):(c=e,0===dn&&xn(Z)),c!==e?(sn=t,t=n=nr(u)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(W)),t}function jn(){var t,n,u,c,o;return dn++,t=ln,35===r.charCodeAt(ln)?(n=hr,ln++):(n=e,0===dn&&xn(pr)),n!==e?(u=ln,dn++,r.substr(ln,3)===dr?(c=dr,ln+=3):(c=e,0===dn&&xn(gr)),dn--,c===e?u=void 0:(ln=u,u=e),u!==e&&(c=Kn())!==e?((o=In())===e&&(o=null),o!==e?(sn=t,t=n=Ar(o)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(fr)),t}function Mn(){var t,n,u,c,o;return dn++,t=ln,Kn()!==e?(n=ln,J.test(r.charAt(ln))?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(K)),u!==e?((c=$n())===e&&(c=null),c!==e?((o=Rn())===e&&(o=null),o!==e?n=u=[u,c,o]:(ln=n,n=e)):(ln=n,n=e)):(ln=n,n=e),n!==e&&(u=Kn())!==e?((c=jn())===e&&(c=null),c!==e&&(o=Kn())!==e?(sn=t,t=Sr(n,c)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(e,0===dn&&xn(Er)),t}function Rn(){var t;return dn++,t=function(){var t,n,u,c;dn++,t=ln,n=zn(),n!==e?(58===r.charCodeAt(ln)?(u=jr,ln++):(u=e,0===dn&&xn(Mr)),u!==e&&(c=zn())!==e?(sn=t,t=n=Rr(n,c)):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn($r));return t}(),t===e&&(t=function(){var t,n,u,c;dn++,t=ln,n=zn(),n!==e?(r.substr(ln,2)===_r?(u=_r,ln+=2):(u=e,0===dn&&xn(Lr)),u!==e&&(c=zn())!==e?(sn=t,t=n=Ur(n,c)):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn(Nr));return t}(),t===e&&(t=function(){var r,t;dn++,r=ln,t=zn(),t!==e&&(sn=r,t=Gr(t));r=t,dn--,r===e&&(t=e,0===dn&&xn(qr));return r}())),dn--,t===e&&(e,0===dn&&xn(Tr)),t}function Nn(){var t,n,u,c;if(dn++,t=ln,r.substr(ln,2)===Pr?(n=Pr,ln+=2):(n=e,0===dn&&xn(Dr)),n!==e){if(u=[],(c=qn())!==e)for(;c!==e;)u.push(c),c=qn();else u=e;u!==e?(r.substr(ln,2)===Pr?(c=Pr,ln+=2):(c=e,0===dn&&xn(Dr)),c!==e?(sn=t,t=n=Qr(u)):(ln=t,t=e)):(ln=t,t=e)}else ln=t,t=e;return dn--,t===e&&(n=e,0===dn&&xn(Or)),t}function _n(){var r,t;return dn++,r=ln,(t=In())!==e&&(sn=r,t=Hr(t)),dn--,(r=t)===e&&(t=e,0===dn&&xn(Yr)),r}function Ln(){var r,t,n;return dn++,r=function(){var r,t,n,u;if(dn++,r=ln,t=re(),t!==e){if(n=[],(u=Un())!==e)for(;u!==e;)n.push(u),u=Un();else n=e;n!==e?r=t=[t,n]:(ln=r,r=e)}else ln=r,r=e;dn--,r===e&&(t=e,0===dn&&xn(zr));return r}(),r===e&&(r=ln,(t=re())===e&&(t=null),t!==e&&(n=te())!==e?r=t=[t,n]:(ln=r,r=e)),dn--,r===e&&(t=e,0===dn&&xn(Ir)),r}function Un(){var r,t,n;for(dn++,r=ln,t=[],n=Zn();n!==e;)t.push(n),n=Zn();return t!==e&&(n=re())!==e?r=t=[t,n]:(ln=r,r=e),dn--,r===e&&(t=e,0===dn&&xn(Br)),r}function qn(){var t,n,u;return dn++,t=ln,n=ln,dn++,r.substr(ln,2)===Pr?(u=Pr,ln+=2):(u=e,0===dn&&xn(Dr)),dn--,u===e?n=void 0:(ln=n,n=e),n!==e?((u=Qn())===e&&(u=Yn()),u!==e?(sn=t,t=n=Kr(u)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(Jr)),t}function Gn(){var r;return dn++,(r=Yn())===e&&(r=Qn())===e&&(r=Dn()),dn--,r===e&&(e,0===dn&&xn(Vr)),r}function On(){var t;return dn++,t=function(){var t,n,u;dn++,t=ln,n=ln,dn++,(u=Qn())===e&&(u=Hn())===e&&(r.substr(ln,2)===S?(u=S,ln+=2):(u=e,0===dn&&xn(T)),u===e&&(u=Ln()));dn--,u===e?n=void 0:(ln=n,n=e);n!==e?(r.length>ln?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(xt)),u!==e?(sn=t,t=n=yt()):(ln=t,t=e)):(ln=t,t=e);dn--,t===e&&(n=e,0===dn&&xn(Ct));return t}(),t===e&&(t=Qn())===e&&(t=Dn()),dn--,t===e&&(e,0===dn&&xn(Vr)),t}function Pn(){var t,n,u,c;return dn++,t=ln,91===r.charCodeAt(ln)?(n=Xr,ln++):(n=e,0===dn&&xn(Zr)),n!==e?(r.substr(ln,4)===rt?(u=rt,ln+=4):(u=e,0===dn&&xn(tt)),u===e&&(r.substr(ln,8)===nt?(u=nt,ln+=8):(u=e,0===dn&&xn(et)),u===e&&(r.substr(ln,5)===ut?(u=ut,ln+=5):(u=e,0===dn&&xn(ct)),u===e&&(r.substr(ln,6)===ot?(u=ot,ln+=6):(u=e,0===dn&&xn(at))))),u!==e?(93===r.charCodeAt(ln)?(c=it,ln++):(c=e,0===dn&&xn(lt)),c!==e?(sn=t,t=n=st(u)):(ln=t,t=e)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(Wr)),t}function Dn(){var t;return dn++,92===r.charCodeAt(ln)?(t=ht,ln++):(t=e,0===dn&&xn(pt)),dn--,t===e&&(e,0===dn&&xn(ft)),t}function Qn(){var t,n,u;return dn++,t=ln,92===r.charCodeAt(ln)?(n=ht,ln++):(n=e,0===dn&&xn(pt)),n!==e?(92===r.charCodeAt(ln)?(u=ht,ln++):(u=e,0===dn&&xn(pt)),u===e&&(58===r.charCodeAt(ln)?(u=jr,ln++):(u=e,0===dn&&xn(Mr)),u===e&&(35===r.charCodeAt(ln)?(u=hr,ln++):(u=e,0===dn&&xn(pr)),u===e&&(61===r.charCodeAt(ln)?(u=k,ln++):(u=e,0===dn&&xn(E)),u===e&&(123===r.charCodeAt(ln)?(u=g,ln++):(u=e,0===dn&&xn(A)),u===e&&(125===r.charCodeAt(ln)?(u=v,ln++):(u=e,0===dn&&xn(m)),u===e&&(126===r.charCodeAt(ln)?(u=gt,ln++):(u=e,0===dn&&xn(At)),u===e&&(110===r.charCodeAt(ln)?(u=vt,ln++):(u=e,0===dn&&xn(mt))))))))),u!==e?(sn=t,t=n=bt(u)):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(dt)),t}function Yn(){var t,n,u;return dn++,t=ln,n=ln,dn++,(u=Qn())===e&&(u=Hn())===e&&(u=Ln()),dn--,u===e?n=void 0:(ln=n,n=e),n!==e?(r.length>ln?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(xt)),u!==e?(sn=t,t=n=yt()):(ln=t,t=e)):(ln=t,t=e),dn--,t===e&&(n=e,0===dn&&xn(Ct)),t}function Hn(){var t;return 61===r.charCodeAt(ln)?(t=k,ln++):(t=e,0===dn&&xn(E)),t===e&&(126===r.charCodeAt(ln)?(t=gt,ln++):(t=e,0===dn&&xn(At)),t===e&&(35===r.charCodeAt(ln)?(t=hr,ln++):(t=e,0===dn&&xn(pr)),t===e&&(123===r.charCodeAt(ln)?(t=g,ln++):(t=e,0===dn&&xn(A)),t===e&&(125===r.charCodeAt(ln)?(t=v,ln++):(t=e,0===dn&&xn(m)),t===e&&(92===r.charCodeAt(ln)?(t=ht,ln++):(t=e,0===dn&&xn(pt)),t===e&&(58===r.charCodeAt(ln)?(t=jr,ln++):(t=e,0===dn&&xn(Mr)))))))),t}function In(){var r,t,n,u;if(dn++,r=ln,(t=Pn())===e&&(t=null),t!==e)if(Kn()!==e){if(n=[],(u=Gn())!==e)for(;u!==e;)n.push(u),u=Gn();else n=e;n!==e?(sn=r,r=t=Et(t,n)):(ln=r,r=e)}else ln=r,r=e;else ln=r,r=e;return dn--,r===e&&(t=e,0===dn&&xn(kt)),r}function zn(){var t,n,u;return t=ln,n=function(){var t;_t.test(r.charAt(ln))?(t=r.charAt(ln),ln++):(t=e,0===dn&&xn(Lt));return t}(),n===e&&(n=null),n!==e?(u=function(){var t,n,u,c,o;t=ln,n=Bn(),n!==e?(u=ln,46===r.charCodeAt(ln)?(c=Rt,ln++):(c=e,0===dn&&xn(Nt)),c!==e&&(o=Bn())!==e?u=c=[c,o]:(ln=u,u=e),u===e&&(u=null),u!==e?t=n=[n,u]:(ln=t,t=e)):(ln=t,t=e);return t}(),u!==e?(sn=t,t=n=Mt()):(ln=t,t=e)):(ln=t,t=e),t}function Bn(){var t,n;if(t=[],or.test(r.charAt(ln))?(n=r.charAt(ln),ln++):(n=e,0===dn&&xn(ar)),n!==e)for(;n!==e;)t.push(n),or.test(r.charAt(ln))?(n=r.charAt(ln),ln++):(n=e,0===dn&&xn(ar));else t=e;return t}function Jn(){var t,n,u;return t=ln,r.substr(ln,4)===Ut?(n=Ut,ln+=4):(n=e,0===dn&&xn(qt)),n!==e&&Kn()!==e&&(u=In())!==e&&Kn()!==e?(sn=t,t=n=Gt(u)):(ln=t,t=e),t}function Kn(){var r,t,n,u,c;for(dn++,r=[],(t=Zn())===e&&(t=ln,(n=re())!==e?(u=ln,dn++,c=Un(),dn--,c===e?u=void 0:(ln=u,u=e),u!==e?t=n=[n,u]:(ln=t,t=e)):(ln=t,t=e));t!==e;)r.push(t),(t=Zn())===e&&(t=ln,(n=re())!==e?(u=ln,dn++,c=Un(),dn--,c===e?u=void 0:(ln=u,u=e),u!==e?t=n=[n,u]:(ln=t,t=e)):(ln=t,t=e));return dn--,r===e&&(t=e,0===dn&&xn(Ot)),r}function Vn(){var r,t;for(dn++,r=[],(t=Xn())===e&&(t=re())===e&&(t=Zn());t!==e;)r.push(t),(t=Xn())===e&&(t=re())===e&&(t=Zn());return dn--,r===e&&(t=e,0===dn&&xn(Pt)),r}function Wn(){var t,n,u,c;for(t=ln,n=ln,dn++,u=[],32===r.charCodeAt(ln)?(c=Dt,ln++):(c=e,0===dn&&xn(Qt));c!==e;)u.push(c),32===r.charCodeAt(ln)?(c=Dt,ln++):(c=e,0===dn&&xn(Qt));return dn--,u!==e?(ln=n,n=void 0):n=e,n!==e&&(sn=t,n=Yt()),t=n}function Xn(){var t,n,u,c;if(dn++,t=ln,r.substr(ln,2)===It?(n=It,ln+=2):(n=e,0===dn&&xn(zt)),n!==e){for(u=[],Bt.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(Jt));c!==e;)u.push(c),Bt.test(r.charAt(ln))?(c=r.charAt(ln),ln++):(c=e,0===dn&&xn(Jt));u!==e?(sn=t,t=n=Vt(u)):(ln=t,t=e)}else ln=t,t=e;return dn--,t===e&&(n=e,0===dn&&xn(Ht)),t}function Zn(){var t;return dn++,32===r.charCodeAt(ln)?(t=Dt,ln++):(t=e,0===dn&&xn(Qt)),t===e&&(9===r.charCodeAt(ln)?(t=Xt,ln++):(t=e,0===dn&&xn(Zt))),dn--,t===e&&(e,0===dn&&xn(Wt)),t}function re(){var t;return dn++,r.substr(ln,2)===tn?(t=tn,ln+=2):(t=e,0===dn&&xn(nn)),t===e&&(10===r.charCodeAt(ln)?(t=en,ln++):(t=e,0===dn&&xn(un)),t===e&&(13===r.charCodeAt(ln)?(t=cn,ln++):(t=e,0===dn&&xn(on)))),dn--,t===e&&(e,0===dn&&xn(rn)),t}function te(){var t,n,u;return t=ln,n=ln,dn++,r.length>ln?(u=r.charAt(ln),ln++):(u=e,0===dn&&xn(xt)),dn--,u===e?n=void 0:(ln=n,n=e),n!==e&&(sn=t,n=an()),t=n}var ne=null,ee=null,ue="moodle",ce=ue;const oe={"\\\\":"&&092;","\\:":"&&058;","\\#":"&&035;","\\=":"&&061;","\\{":"&&123;","\\}":"&&125;","\\~":"&&126;","\\n":"&&010"};function ae(r){return r.replace(/&&092;/g,"\\").replace(/&&058;/g,":").replace(/&&035;/g,"#").replace(/&&061;/g,"=").replace(/&&123;/g,"{").replace(/&&125;/g,"}").replace(/&&126;/g,"~").replace(/&&010/g,"\n")}function ie(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function le(){return ce}function se(){ce=ue}if((n=c())!==e&&ln===r.length)return n;throw n!==e&&ln<r.length&&xn({type:"end"}),yn(pn,hn<r.length?r.charAt(hn):null,hn<r.length?Cn(hn,hn+1):Cn(hn,hn))}peg$subclass(peg$SyntaxError,Error),peg$SyntaxError.buildMessage=function(r,t){var n={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}return"Expected "+function(r){var t,e,u,c=new Array(r.length);for(t=0;t<r.length;t++)c[t]=(u=r[t],n[u.type](u));if(c.sort(),c.length>0){for(t=1,e=1;t<c.length;t++)c[t-1]!==c[t]&&(c[e]=c[t],e++);c.length=e}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(t)+" found."},module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};

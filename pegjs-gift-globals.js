!function(r){"use strict";function t(r,n,e,u){this.message=r,this.expected=n,this.found=e,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}!function(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}(t,Error),t.buildMessage=function(r,t){var n={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t,n="";for(t=0;t<r.parts.length;t++)n+=r.parts[t]instanceof Array?c(r.parts[t][0])+"-"+c(r.parts[t][1]):c(r.parts[t]);return"["+(r.inverted?"^":"")+n+"]"},any:function(r){return"any character"},end:function(r){return"end of input"},other:function(r){return r.description}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}function c(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(r){return"\\x0"+e(r)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(r){return"\\x"+e(r)}))}return"Expected "+function(r){var t,e,u,c=new Array(r.length);for(t=0;t<r.length;t++)c[t]=(u=r[t],n[u.type](u));if(c.sort(),c.length>0){for(t=1,e=1;t<c.length;t++)c[t-1]!==c[t]&&(c[e]=c[t],e++);c.length=e}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(t)+" found."},r.giftParser={SyntaxError:t,parse:function(r,n){n=void 0!==n?n:{};var e,u={},c={GIFTQuestions:wn},o=wn,a=function(r){return r},i=bn("Category"),l="$",f=vn("$",!1),s="CATEGORY:",h=vn("CATEGORY:",!1),p=function(r){return{type:"Category",title:r}},d=bn("Description"),g=function(r,t){var n={id:ee,tags:ue,type:"Description",title:r,stem:t,hasEmbeddedAnswers:!1};return se(),ee=null,ue=null,n},A="{",v=vn("{",!1),m="}",b=vn("}",!1),C=function(r,t,n,e){var u=null!==e,c=t?t.text+(u?" ":""):"",o=t&&t.format||e&&e.format||"moodle",a=c+(u?"_____ "+e.text:""),i={type:n.type,title:r,stem:{format:o,text:a},hasEmbeddedAnswers:u};return i=function(r,t){switch(r.globalFeedback=t.globalFeedback,r.type){case"TF":r.isTrue=t.isTrue,r.incorrectFeedback=t.feedback[1],r.correctFeedback=t.feedback[2];break;case"MC":case"Numerical":case"Short":r.choices=t.choices;break;case"Matching":r.matchPairs=t.matchPairs}"MC"==r.type&&function(r){for(var t=!0,n=0;n<r.length;n++)t&=r[n].isCorrect;return t}(r.choices)&&(r.type="Short");return r.id=ee,r.tags=ue,r}(i,n),se(),i},x=bn("{= match1 -> Match1\n...}"),y=function(r,t){return{type:"Matching",matchPairs:r,globalFeedback:t}},F=bn("matches"),w=function(r){return r},k=bn("match"),E="=",T=vn("=",!1),S="->",j=vn("->",!1),M=function(r,t){return{subquestion:{format:null!==r?r.format:fe(),text:null!==r?r.text:""},subanswer:t}},R=bn("{T} or {F} or {TRUE} or {FALSE}"),N=function(r,t,n){return{type:"TF",isTrue:r,feedback:t,globalFeedback:n}},_=function(r){return r},L="TRUE",P=vn("TRUE",!1),U="T",q=vn("T",!1),G=function(){return!0},O="FALSE",D=vn("FALSE",!1),Q="F",Y=vn("F",!1),$=function(){return!1},H=bn("{=correct choice ~incorrect choice ... }"),I=function(r,t){return{type:"MC",choices:r,globalFeedback:t}},z=bn("Choices"),B=function(r){return r},J=bn("Choice"),K=/^[=~]/,V=mn(["=","~"],!1,!1),W=function(r,t){var n=r[2],e=r[4];return r={isCorrect:"="==r[0],weight:n,text:e,feedback:t}},X=bn("(weight)"),Z="%",rr=vn("%",!1),tr=/^[\-]/,nr=mn(["-"],!1,!1),er=function(r){return parseFloat(r.join(""))},ur=bn("(percent)"),cr="100",or=vn("100",!1),ar=/^[0-9]/,ir=mn([["0","9"]],!1,!1),lr=/^[.]/,fr=mn(["."],!1,!1),sr=function(){return An()},hr=bn("(feedback)"),pr="#",dr=vn("#",!1),gr="###",Ar=vn("###",!1),vr=function(r){return r},mr=bn("Essay question { ... }"),br="",Cr=function(r){return{type:"Essay",globalFeedback:r}},xr=bn("Single short answer { ... }"),yr=function(r,t,n){var e=[];return e.push({isCorrect:!0,text:r,feedback:t,weight:null}),{type:"Short",choices:e,globalFeedback:n}},Fr=bn("{#... }"),wr=function(r,t){return{type:"Numerical",choices:r,globalFeedback:t}},kr=bn("Numerical Answers"),Er=bn("Multiple Numerical Choices"),Tr=bn("Numerical Choice"),Sr=function(r,t){var n=r[0],e=r[1],u=r[2];return r={isCorrect:"="==n,weight:e,text:null!==u?u:{format:fe(),text:"*"},feedback:t}},jr=bn("Single numeric answer"),Mr=bn("(number with range)"),Rr=":",Nr=vn(":",!1),_r=function(r,t){return{type:"range",number:r,range:t}},Lr=bn("(number with high-low)"),Pr="..",Ur=vn("..",!1),qr=function(r,t){return{type:"high-low",numberHigh:t,numberLow:r}},Gr=bn("(number answer)"),Or=function(r){return{type:"simple",number:r}},Dr=bn(":: Title ::"),Qr="::",Yr=vn("::",!1),$r=function(r){return ie(r.join(""))},Hr=bn("Question stem"),Ir=function(r){var t;return t=r.format,oe=t,r},zr=bn("(blank lines separator)"),Br=bn("(blank lines)"),Jr=bn("blank line"),Kr=bn("(Title text)"),Vr=function(r){return r},Wr=bn("(text character)"),Xr=bn("format"),Zr="[",rt=vn("[",!1),tt="html",nt=vn("html",!1),et="markdown",ut=vn("markdown",!1),ct="plain",ot=vn("plain",!1),at="moodle",it=vn("moodle",!1),lt="]",ft=vn("]",!1),st=function(r){return r},ht=bn("(escape character)"),pt="\\",dt=vn("\\",!1),gt=bn("escape sequence"),At="~",vt=vn("~",!1),mt="n",bt=vn("n",!1),Ct=function(r){return ae["\\"+r]},xt=bn(""),yt={type:"any"},Ft=function(){return An()},wt=bn("(formatted text excluding '->')"),kt=function(r,t){return{format:null!==r?r:fe(),text:"html"!==r?ie(le(t.join("").trim())):ie(t.join("")).replace(/\r\n/g,"\n").trim()}},Et=bn("(formatted text)"),Tt=function(r,t){return{format:null!==r?r:fe(),text:"html"!==r?ie(le(t.join("").trim())):ie(t.join("")).replace(/\r\n/g,"\n").trim()}},St=bn("(unformatted text)"),jt=function(r){return le(r.join("").trim())},Mt=bn("(category text)"),Rt=function(r){return r.flat().join("")},Nt=function(){return parseFloat(An())},_t=".",Lt=vn(".",!1),Pt=/^[+\-]/,Ut=mn(["+","-"],!1,!1),qt="####",Gt=vn("####",!1),Ot=function(r){return r},Dt=bn("(single line whitespace)"),Qt=bn("(multiple line whitespace)"),Yt=" ",$t=vn(" ",!1),Ht=function(){ee=null,ue=null},It=bn("(comment)"),zt="//",Bt=vn("//",!1),Jt=/^[^\n\r]/,Kt=mn(["\n","\r"],!0,!1),Vt=function(r){return null},Wt=function(r){var t=r.join(""),n=t.match(/\[id:([^\x00-\x1F\x7F]+?)]/);n&&(ee=n[1].trim().replace("\\]","]"));t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g);return Array.from(t.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),(function(r){return r[1]})).forEach((function(r){ue||(ue=[]),ue.push(r)})),null},Xt=bn("(space)"),Zt="\t",rn=vn("\t",!1),tn=bn("(end of line)"),nn="\r\n",en=vn("\r\n",!1),un="\n",cn=vn("\n",!1),on="\r",an=vn("\r",!1),ln=function(){return"EOF"},fn=0,sn=0,hn=[{line:1,column:1}],pn=0,dn=[],gn=0;if("startRule"in n){if(!(n.startRule in c))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=c[n.startRule]}function An(){return r.substring(sn,fn)}function vn(r,t){return{type:"literal",text:r,ignoreCase:t}}function mn(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function bn(r){return{type:"other",description:r}}function Cn(t){var n,e=hn[t];if(e)return e;for(n=t-1;!hn[n];)n--;for(e={line:(e=hn[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return hn[t]=e,e}function xn(r,t){var n=Cn(r),e=Cn(t);return{start:{offset:r,line:n.line,column:n.column},end:{offset:t,line:e.line,column:e.column}}}function yn(r){fn<pn||(fn>pn&&(pn=fn,dn=[]),dn.push(r))}function Fn(r,n,e){return new t(t.buildMessage(r,n),r,n,e)}function wn(){var r,t,n;if(r=fn,t=[],(n=kn())===u&&(n=En())===u&&(n=Tn()),n!==u)for(;n!==u;)t.push(n),(n=kn())===u&&(n=En())===u&&(n=Tn());else t=u;return t!==u&&(n=Vn())!==u&&Wn()!==u?(sn=r,r=t=a(t)):(fn=r,r=u),r}function kn(){var t,n,e,c;return gn++,t=fn,Xn()!==u&&Wn()!==u?(36===r.charCodeAt(fn)?(n=l,fn++):(n=u,0===gn&&yn(f)),n!==u?(r.substr(fn,9)===s?(e=s,fn+=9):(e=u,0===gn&&yn(h)),e!==u&&Vn()!==u?(c=function(){var t,n,e,c,o;gn++,t=fn,n=[],e=fn,c=fn,gn++,o=te(),gn--,o===u?c=void 0:(fn=c,c=u);c!==u?(r.length>fn?(o=r.charAt(fn),fn++):(o=u,0===gn&&yn(yt)),o!==u?e=c=[c,o]:(fn=e,e=u)):(fn=e,e=u);for(;e!==u;)n.push(e),e=fn,c=fn,gn++,o=te(),gn--,o===u?c=void 0:(fn=c,c=u),c!==u?(r.length>fn?(o=r.charAt(fn),fn++):(o=u,0===gn&&yn(yt)),o!==u?e=c=[c,o]:(fn=e,e=u)):(fn=e,e=u);n!==u?(e=fn,gn++,(c=te())===u&&(c=ne()),gn--,c!==u?(fn=e,e=void 0):e=u,e!==u?(sn=t,t=n=Rt(n)):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(Mt));return t}(),c!==u&&Un()!==u?(sn=t,t=p(c)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(u,0===gn&&yn(i)),t}function En(){var r,t,n,e;if(gn++,r=fn,Xn()!==u)if(Wn()!==u){for(t=[],n=Zn();n!==u;)t.push(n),n=Zn();t!==u?((n=Ln())===u&&(n=null),n!==u&&Vn()!==u&&(e=Pn())!==u&&Un()!==u?(sn=r,r=g(n,e)):(fn=r,r=u)):(fn=r,r=u)}else fn=r,r=u;else fn=r,r=u;return gn--,r===u&&(u,0===gn&&yn(d)),r}function Tn(){var t,n,e,c,o,a,i,l;if(t=fn,Xn()!==u)if(Wn()!==u){for(n=[],e=Zn();e!==u;)n.push(e),e=Zn();n!==u?((e=Ln())===u&&(e=null),e!==u&&Vn()!==u?((c=Pn())===u&&(c=null),c!==u&&Vn()!==u?(123===r.charCodeAt(fn)?(o=A,fn++):(o=u,0===gn&&yn(v)),o!==u&&Vn()!==u?(a=function(){var r,t,n;gn++,r=fn,t=function(){var r,t,n;if(gn++,r=fn,t=[],n=Sn(),n!==u)for(;n!==u;)t.push(n),n=Sn();else t=u;t!==u&&(sn=r,t=w(t));r=t,gn--,r===u&&(t=u,0===gn&&yn(F));return r}(),t!==u&&Vn()!==u?((n=Kn())===u&&(n=null),n!==u&&Vn()!==u?(sn=r,r=t=y(t,n)):(fn=r,r=u)):(fn=r,r=u);gn--,r===u&&(t=u,0===gn&&yn(x));return r}(),a===u&&(a=function(){var t,n,e,c,o,a;gn++,t=fn,n=function(){var t,n;t=fn,n=function(){var t,n;t=fn,r.substr(fn,4)===L?(n=L,fn+=4):(n=u,0===gn&&yn(P));n===u&&(84===r.charCodeAt(fn)?(n=U,fn++):(n=u,0===gn&&yn(q)));n!==u&&(sn=t,n=G());return t=n,t}(),n===u&&(n=function(){var t,n;t=fn,r.substr(fn,5)===O?(n=O,fn+=5):(n=u,0===gn&&yn(D));n===u&&(70===r.charCodeAt(fn)?(n=Q,fn++):(n=u,0===gn&&yn(Y)));n!==u&&(sn=t,n=$());return t=n,t}());n!==u&&(sn=t,n=_(n));return t=n,t}(),n!==u&&Vn()!==u?(e=fn,(c=Vn())!==u?((o=Rn())===u&&(o=null),o!==u?((a=Rn())===u&&(a=null),a!==u?e=c=[c,o,a]:(fn=e,e=u)):(fn=e,e=u)):(fn=e,e=u),e!==u&&(c=Vn())!==u?((o=Kn())===u&&(o=null),o!==u?(sn=t,t=n=N(n,e,o)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(R));return t}(),a===u&&(a=function(){var r,t,n;gn++,r=fn,t=function(){var r,t,n;if(gn++,r=fn,t=[],n=jn(),n!==u)for(;n!==u;)t.push(n),n=jn();else t=u;t!==u&&(sn=r,t=B(t));r=t,gn--,r===u&&(t=u,0===gn&&yn(z));return r}(),t!==u&&Vn()!==u?((n=Kn())===u&&(n=null),n!==u&&Vn()!==u?(sn=r,r=t=I(t,n)):(fn=r,r=u)):(fn=r,r=u);gn--,r===u&&(t=u,0===gn&&yn(H));return r}(),a===u&&(a=function(){var t,n,e,c;gn++,t=fn,35===r.charCodeAt(fn)?(n=pr,fn++):(n=u,0===gn&&yn(dr));n!==u&&Vn()!==u?(e=function(){var r;gn++,r=function(){var r,t,n;if(gn++,r=fn,t=[],n=Nn(),n!==u)for(;n!==u;)t.push(n),n=Nn();else t=u;t!==u&&(sn=r,t=B(t));r=t,gn--,r===u&&(t=u,0===gn&&yn(Er));return r}(),r===u&&(r=_n());gn--,r===u&&(u,0===gn&&yn(kr));return r}(),e!==u&&Vn()!==u?((c=Kn())===u&&(c=null),c!==u?(sn=t,t=n=wr(e,c)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(Fr));return t}(),a===u&&(a=function(){var r,t,n,e;gn++,r=fn,t=zn(),t!==u&&Vn()!==u?((n=Rn())===u&&(n=null),n!==u&&Vn()!==u?((e=Kn())===u&&(e=null),e!==u&&Vn()!==u?(sn=r,r=t=yr(t,n,e)):(fn=r,r=u)):(fn=r,r=u)):(fn=r,r=u);gn--,r===u&&(t=u,0===gn&&yn(xr));return r}(),a===u&&(a=function(){var r,t,n;gn++,r=fn,t=br,t!==u&&Vn()!==u?((n=Kn())===u&&(n=null),n!==u&&Vn()!==u?(sn=r,r=t=Cr(n)):(fn=r,r=u)):(fn=r,r=u);gn--,r===u&&(t=u,0===gn&&yn(mr));return r}()))))),a!==u&&Vn()!==u?(125===r.charCodeAt(fn)?(i=m,fn++):(i=u,0===gn&&yn(b)),i!==u&&Vn()!==u?(l=function(){var t,n,e,c;gn++,t=fn,r.substr(fn,2)===zt?(n=zt,fn+=2):(n=u,0===gn&&yn(Bt));if(n!==u){for(e=[],Jt.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(Kt));c!==u;)e.push(c),Jt.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(Kt));e!==u?(sn=t,t=n=Vt(e)):(fn=t,t=u)}else fn=t,t=u;gn--,t===u&&(n=u,0===gn&&yn(It));return t}(),l===u&&(l=Pn()),l===u&&(l=null),l!==u&&Un()!==u?(sn=t,t=C(e,c,a,l)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)}else fn=t,t=u;else fn=t,t=u;return t}function Sn(){var t,n,e,c,o;return gn++,t=fn,Vn()!==u?(61===r.charCodeAt(fn)?(n=E,fn++):(n=u,0===gn&&yn(T)),n!==u&&Vn()!==u?(e=function(){var r,t,n,e;gn++,r=fn,t=Qn(),t===u&&(t=null);if(t!==u)if(Vn()!==u){if(n=[],(e=Dn())!==u)for(;e!==u;)n.push(e),e=Dn();else n=u;n!==u?(sn=r,r=t=kt(t,n)):(fn=r,r=u)}else fn=r,r=u;else fn=r,r=u;gn--,r===u&&(t=u,0===gn&&yn(wt));return r}(),e===u&&(e=null),e!==u&&Vn()!==u?(r.substr(fn,2)===S?(c=S,fn+=2):(c=u,0===gn&&yn(j)),c!==u&&Vn()!==u?(o=function(){var r,t,n;if(gn++,r=fn,t=[],n=On(),n!==u)for(;n!==u;)t.push(n),n=On();else t=u;t!==u&&(sn=r,t=jt(t));r=t,gn--,r===u&&(t=u,0===gn&&yn(St));return r}(),o!==u&&Vn()!==u?(sn=t,t=M(e,o)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(u,0===gn&&yn(k)),t}function jn(){var t,n,e,c,o,a,i;return gn++,t=fn,Vn()!==u?(n=fn,K.test(r.charAt(fn))?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(V)),e!==u&&(c=Vn())!==u?((o=Mn())===u&&(o=null),o!==u&&(a=Vn())!==u&&(i=zn())!==u?n=e=[e,c,o,a,i]:(fn=n,n=u)):(fn=n,n=u),n!==u?((e=Rn())===u&&(e=null),e!==u&&(c=Vn())!==u?(sn=t,t=W(n,e)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(u,0===gn&&yn(J)),t}function Mn(){var t,n,e,c,o;return gn++,t=fn,37===r.charCodeAt(fn)?(n=Z,fn++):(n=u,0===gn&&yn(rr)),n!==u?(e=fn,tr.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(nr)),c===u&&(c=null),c!==u?(o=function(){var t,n,e,c,o,a;gn++,r.substr(fn,3)===cr?(t=cr,fn+=3):(t=u,0===gn&&yn(or));if(t===u)if(t=fn,ar.test(r.charAt(fn))?(n=r.charAt(fn),fn++):(n=u,0===gn&&yn(ir)),n!==u)if(ar.test(r.charAt(fn))?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(ir)),e===u&&(e=null),e!==u)if(lr.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(fr)),c===u&&(c=null),c!==u){for(o=[],ar.test(r.charAt(fn))?(a=r.charAt(fn),fn++):(a=u,0===gn&&yn(ir));a!==u;)o.push(a),ar.test(r.charAt(fn))?(a=r.charAt(fn),fn++):(a=u,0===gn&&yn(ir));o!==u?(sn=t,t=n=sr()):(fn=t,t=u)}else fn=t,t=u;else fn=t,t=u;else fn=t,t=u;gn--,t===u&&(n=u,0===gn&&yn(ur));return t}(),o!==u?e=c=[c,o]:(fn=e,e=u)):(fn=e,e=u),e!==u?(37===r.charCodeAt(fn)?(c=Z,fn++):(c=u,0===gn&&yn(rr)),c!==u?(sn=t,t=n=er(e)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(X)),t}function Rn(){var t,n,e,c,o;return gn++,t=fn,35===r.charCodeAt(fn)?(n=pr,fn++):(n=u,0===gn&&yn(dr)),n!==u?(e=fn,gn++,r.substr(fn,3)===gr?(c=gr,fn+=3):(c=u,0===gn&&yn(Ar)),gn--,c===u?e=void 0:(fn=e,e=u),e!==u&&(c=Vn())!==u?((o=zn())===u&&(o=null),o!==u?(sn=t,t=n=vr(o)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(hr)),t}function Nn(){var t,n,e,c,o;return gn++,t=fn,Vn()!==u?(n=fn,K.test(r.charAt(fn))?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(V)),e!==u?((c=Mn())===u&&(c=null),c!==u?((o=_n())===u&&(o=null),o!==u?n=e=[e,c,o]:(fn=n,n=u)):(fn=n,n=u)):(fn=n,n=u),n!==u&&(e=Vn())!==u?((c=Rn())===u&&(c=null),c!==u&&(o=Vn())!==u?(sn=t,t=Sr(n,c)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(u,0===gn&&yn(Tr)),t}function _n(){var t;return gn++,t=function(){var t,n,e,c;gn++,t=fn,n=Bn(),n!==u?(58===r.charCodeAt(fn)?(e=Rr,fn++):(e=u,0===gn&&yn(Nr)),e!==u&&(c=Bn())!==u?(sn=t,t=n=_r(n,c)):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(Mr));return t}(),t===u&&(t=function(){var t,n,e,c;gn++,t=fn,n=Bn(),n!==u?(r.substr(fn,2)===Pr?(e=Pr,fn+=2):(e=u,0===gn&&yn(Ur)),e!==u&&(c=Bn())!==u?(sn=t,t=n=qr(n,c)):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(Lr));return t}(),t===u&&(t=function(){var r,t;gn++,r=fn,t=Bn(),t!==u&&(sn=r,t=Or(t));r=t,gn--,r===u&&(t=u,0===gn&&yn(Gr));return r}())),gn--,t===u&&(u,0===gn&&yn(jr)),t}function Ln(){var t,n,e,c;if(gn++,t=fn,r.substr(fn,2)===Qr?(n=Qr,fn+=2):(n=u,0===gn&&yn(Yr)),n!==u){if(e=[],(c=Gn())!==u)for(;c!==u;)e.push(c),c=Gn();else e=u;e!==u?(r.substr(fn,2)===Qr?(c=Qr,fn+=2):(c=u,0===gn&&yn(Yr)),c!==u?(sn=t,t=n=$r(e)):(fn=t,t=u)):(fn=t,t=u)}else fn=t,t=u;return gn--,t===u&&(n=u,0===gn&&yn(Dr)),t}function Pn(){var r,t;return gn++,r=fn,(t=zn())!==u&&(sn=r,t=Ir(t)),gn--,(r=t)===u&&(t=u,0===gn&&yn(Hr)),r}function Un(){var r,t,n;return gn++,r=function(){var r,t,n,e;if(gn++,r=fn,t=te(),t!==u){if(n=[],(e=qn())!==u)for(;e!==u;)n.push(e),e=qn();else n=u;n!==u?r=t=[t,n]:(fn=r,r=u)}else fn=r,r=u;gn--,r===u&&(t=u,0===gn&&yn(Br));return r}(),r===u&&(r=fn,(t=te())===u&&(t=null),t!==u&&(n=ne())!==u?r=t=[t,n]:(fn=r,r=u)),gn--,r===u&&(t=u,0===gn&&yn(zr)),r}function qn(){var r,t,n;for(gn++,r=fn,t=[],n=re();n!==u;)t.push(n),n=re();return t!==u&&(n=te())!==u?r=t=[t,n]:(fn=r,r=u),gn--,r===u&&(t=u,0===gn&&yn(Jr)),r}function Gn(){var t,n,e;return gn++,t=fn,n=fn,gn++,r.substr(fn,2)===Qr?(e=Qr,fn+=2):(e=u,0===gn&&yn(Yr)),gn--,e===u?n=void 0:(fn=n,n=u),n!==u?((e=$n())===u&&(e=Hn()),e!==u?(sn=t,t=n=Vr(e)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(Kr)),t}function On(){var r;return gn++,(r=Hn())===u&&(r=$n())===u&&(r=Yn()),gn--,r===u&&(u,0===gn&&yn(Wr)),r}function Dn(){var t;return gn++,t=function(){var t,n,e;gn++,t=fn,n=fn,gn++,(e=$n())===u&&(e=In())===u&&(r.substr(fn,2)===S?(e=S,fn+=2):(e=u,0===gn&&yn(j)),e===u&&(e=Un()));gn--,e===u?n=void 0:(fn=n,n=u);n!==u?(r.length>fn?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(yt)),e!==u?(sn=t,t=n=Ft()):(fn=t,t=u)):(fn=t,t=u);gn--,t===u&&(n=u,0===gn&&yn(xt));return t}(),t===u&&(t=$n())===u&&(t=Yn()),gn--,t===u&&(u,0===gn&&yn(Wr)),t}function Qn(){var t,n,e,c;return gn++,t=fn,91===r.charCodeAt(fn)?(n=Zr,fn++):(n=u,0===gn&&yn(rt)),n!==u?(r.substr(fn,4)===tt?(e=tt,fn+=4):(e=u,0===gn&&yn(nt)),e===u&&(r.substr(fn,8)===et?(e=et,fn+=8):(e=u,0===gn&&yn(ut)),e===u&&(r.substr(fn,5)===ct?(e=ct,fn+=5):(e=u,0===gn&&yn(ot)),e===u&&(r.substr(fn,6)===at?(e=at,fn+=6):(e=u,0===gn&&yn(it))))),e!==u?(93===r.charCodeAt(fn)?(c=lt,fn++):(c=u,0===gn&&yn(ft)),c!==u?(sn=t,t=n=st(e)):(fn=t,t=u)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(Xr)),t}function Yn(){var t;return gn++,92===r.charCodeAt(fn)?(t=pt,fn++):(t=u,0===gn&&yn(dt)),gn--,t===u&&(u,0===gn&&yn(ht)),t}function $n(){var t,n,e;return gn++,t=fn,92===r.charCodeAt(fn)?(n=pt,fn++):(n=u,0===gn&&yn(dt)),n!==u?(92===r.charCodeAt(fn)?(e=pt,fn++):(e=u,0===gn&&yn(dt)),e===u&&(58===r.charCodeAt(fn)?(e=Rr,fn++):(e=u,0===gn&&yn(Nr)),e===u&&(35===r.charCodeAt(fn)?(e=pr,fn++):(e=u,0===gn&&yn(dr)),e===u&&(61===r.charCodeAt(fn)?(e=E,fn++):(e=u,0===gn&&yn(T)),e===u&&(123===r.charCodeAt(fn)?(e=A,fn++):(e=u,0===gn&&yn(v)),e===u&&(125===r.charCodeAt(fn)?(e=m,fn++):(e=u,0===gn&&yn(b)),e===u&&(126===r.charCodeAt(fn)?(e=At,fn++):(e=u,0===gn&&yn(vt)),e===u&&(110===r.charCodeAt(fn)?(e=mt,fn++):(e=u,0===gn&&yn(bt))))))))),e!==u?(sn=t,t=n=Ct(e)):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(gt)),t}function Hn(){var t,n,e;return gn++,t=fn,n=fn,gn++,(e=$n())===u&&(e=In())===u&&(e=Un()),gn--,e===u?n=void 0:(fn=n,n=u),n!==u?(r.length>fn?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(yt)),e!==u?(sn=t,t=n=Ft()):(fn=t,t=u)):(fn=t,t=u),gn--,t===u&&(n=u,0===gn&&yn(xt)),t}function In(){var t;return 61===r.charCodeAt(fn)?(t=E,fn++):(t=u,0===gn&&yn(T)),t===u&&(126===r.charCodeAt(fn)?(t=At,fn++):(t=u,0===gn&&yn(vt)),t===u&&(35===r.charCodeAt(fn)?(t=pr,fn++):(t=u,0===gn&&yn(dr)),t===u&&(123===r.charCodeAt(fn)?(t=A,fn++):(t=u,0===gn&&yn(v)),t===u&&(125===r.charCodeAt(fn)?(t=m,fn++):(t=u,0===gn&&yn(b)),t===u&&(92===r.charCodeAt(fn)?(t=pt,fn++):(t=u,0===gn&&yn(dt)),t===u&&(58===r.charCodeAt(fn)?(t=Rr,fn++):(t=u,0===gn&&yn(Nr)))))))),t}function zn(){var r,t,n,e;if(gn++,r=fn,(t=Qn())===u&&(t=null),t!==u)if(Vn()!==u){if(n=[],(e=On())!==u)for(;e!==u;)n.push(e),e=On();else n=u;n!==u?(sn=r,r=t=Tt(t,n)):(fn=r,r=u)}else fn=r,r=u;else fn=r,r=u;return gn--,r===u&&(t=u,0===gn&&yn(Et)),r}function Bn(){var t,n,e;return t=fn,n=function(){var t;Pt.test(r.charAt(fn))?(t=r.charAt(fn),fn++):(t=u,0===gn&&yn(Ut));return t}(),n===u&&(n=null),n!==u?(e=function(){var t,n,e,c,o;t=fn,n=Jn(),n!==u?(e=fn,46===r.charCodeAt(fn)?(c=_t,fn++):(c=u,0===gn&&yn(Lt)),c!==u&&(o=Jn())!==u?e=c=[c,o]:(fn=e,e=u),e===u&&(e=null),e!==u?t=n=[n,e]:(fn=t,t=u)):(fn=t,t=u);return t}(),e!==u?(sn=t,t=n=Nt()):(fn=t,t=u)):(fn=t,t=u),t}function Jn(){var t,n;if(t=[],ar.test(r.charAt(fn))?(n=r.charAt(fn),fn++):(n=u,0===gn&&yn(ir)),n!==u)for(;n!==u;)t.push(n),ar.test(r.charAt(fn))?(n=r.charAt(fn),fn++):(n=u,0===gn&&yn(ir));else t=u;return t}function Kn(){var t,n,e;return t=fn,r.substr(fn,4)===qt?(n=qt,fn+=4):(n=u,0===gn&&yn(Gt)),n!==u&&Vn()!==u&&(e=zn())!==u&&Vn()!==u?(sn=t,t=n=Ot(e)):(fn=t,t=u),t}function Vn(){var r,t,n,e,c;for(gn++,r=[],(t=re())===u&&(t=fn,(n=te())!==u?(e=fn,gn++,c=qn(),gn--,c===u?e=void 0:(fn=e,e=u),e!==u?t=n=[n,e]:(fn=t,t=u)):(fn=t,t=u));t!==u;)r.push(t),(t=re())===u&&(t=fn,(n=te())!==u?(e=fn,gn++,c=qn(),gn--,c===u?e=void 0:(fn=e,e=u),e!==u?t=n=[n,e]:(fn=t,t=u)):(fn=t,t=u));return gn--,r===u&&(t=u,0===gn&&yn(Dt)),r}function Wn(){var r,t;for(gn++,r=[],(t=Zn())===u&&(t=te())===u&&(t=re());t!==u;)r.push(t),(t=Zn())===u&&(t=te())===u&&(t=re());return gn--,r===u&&(t=u,0===gn&&yn(Qt)),r}function Xn(){var t,n,e,c;for(t=fn,n=fn,gn++,e=[],32===r.charCodeAt(fn)?(c=Yt,fn++):(c=u,0===gn&&yn($t));c!==u;)e.push(c),32===r.charCodeAt(fn)?(c=Yt,fn++):(c=u,0===gn&&yn($t));return gn--,e!==u?(fn=n,n=void 0):n=u,n!==u&&(sn=t,n=Ht()),t=n}function Zn(){var t,n,e,c;if(gn++,t=fn,r.substr(fn,2)===zt?(n=zt,fn+=2):(n=u,0===gn&&yn(Bt)),n!==u){for(e=[],Jt.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(Kt));c!==u;)e.push(c),Jt.test(r.charAt(fn))?(c=r.charAt(fn),fn++):(c=u,0===gn&&yn(Kt));e!==u?(sn=t,t=n=Wt(e)):(fn=t,t=u)}else fn=t,t=u;return gn--,t===u&&(n=u,0===gn&&yn(It)),t}function re(){var t;return gn++,32===r.charCodeAt(fn)?(t=Yt,fn++):(t=u,0===gn&&yn($t)),t===u&&(9===r.charCodeAt(fn)?(t=Zt,fn++):(t=u,0===gn&&yn(rn))),gn--,t===u&&(u,0===gn&&yn(Xt)),t}function te(){var t;return gn++,r.substr(fn,2)===nn?(t=nn,fn+=2):(t=u,0===gn&&yn(en)),t===u&&(10===r.charCodeAt(fn)?(t=un,fn++):(t=u,0===gn&&yn(cn)),t===u&&(13===r.charCodeAt(fn)?(t=on,fn++):(t=u,0===gn&&yn(an)))),gn--,t===u&&(u,0===gn&&yn(tn)),t}function ne(){var t,n,e;return t=fn,n=fn,gn++,r.length>fn?(e=r.charAt(fn),fn++):(e=u,0===gn&&yn(yt)),gn--,e===u?n=void 0:(fn=n,n=u),n!==u&&(sn=t,n=ln()),t=n}var ee=null,ue=null,ce="moodle",oe=ce;const ae={"\\\\":"&&092;","\\:":"&&058;","\\#":"&&035;","\\=":"&&061;","\\{":"&&123;","\\}":"&&125;","\\~":"&&126;","\\n":"&&010"};function ie(r){return r.replace(/&&092;/g,"\\").replace(/&&058;/g,":").replace(/&&035;/g,"#").replace(/&&061;/g,"=").replace(/&&123;/g,"{").replace(/&&125;/g,"}").replace(/&&126;/g,"~").replace(/&&010/g,"\n")}function le(r){return(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function fe(){return oe}function se(){oe=ce}if((e=o())!==u&&fn===r.length)return e;throw e!==u&&fn<r.length&&yn({type:"end"}),Fn(dn,pn<r.length?r.charAt(pn):null,pn<r.length?xn(pn,pn+1):xn(pn,pn))}}}(this);
